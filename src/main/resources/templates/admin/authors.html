<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <title>Autori - Admin</title>

    <!-- Stili base e specifici -->
    <link rel="stylesheet" href="/css/base.css" />
    <link rel="stylesheet" href="/css/search.css" />
    <link rel="stylesheet" href="/css/author.css" />
  </head>

  <body>
    <div th:replace="fragments/adminNavbar :: navbarAdmin"></div>

    <!-- Form di ricerca per nome o cognome -->
    <form method="get" th:action="@{/authors/search}" class="search-form">
      <input
        type="text"
        name="q"
        placeholder="Nome o Cognome‚Ä¶"
        th:value="${q}"
      />
      <button type="submit">üîç Cerca</button>
    </form>

    <!-- Pulsante Annulla ricerca -->
    <div th:if="${q != null and q != ''}" class="cancel-search">
      <a th:href="@{/authors}" class="button">Annulla ricerca</a>
    </div>

    <!-- Conteggio risultati -->
    <div class="result" th:if="${count != null}">
      <p>Risultati trovati: <strong th:text="${count}"></strong></p>
      <!-- Messaggio di nessun risultato -->
      <div th:if="${message != null}" class="info" th:text="${message}"></div>
    </div>

    <!-- Se non √® ricerca e la lista √® vuota -->
    <div th:if="${authors.isEmpty()} and ${count == null}" class="info">
      Non ci sono autori nel sistema
    </div>

    <!-- Lista autori -->
      <section class="authors">
            <div class="author-card" th:each="author : ${authors}">
                <a th:href="@{'/author' + '/'+ ${author.id}}">
                    <!--Mostra l'immagine se esiste-->
                    <img th:if="${author.image != null and author.image.path != null}"
                        th:src="@{'/uploads/' + ${author.image.path}}"
                        alt="Foto di [[${author.title}]]"
                        class="author-image">
                    <!--Immagine placeholder se nessuna immagine √® presente-->
                    <img th:if="${author.image == null or author.image.path == null}"
                        src="/images/default_author.jpg"
                        alt="Nessuna immagine disponibile"
                        class="author-image">
                    <!--Overlay con nome e cognome dell'autore-->
                    <div class="name-overlay">
                        <h2 th:text="${author.name + ' ' + author.surname}"></h2>
                    </div>
                </a>
            </div>
        </section>
  </body>
</html>
