<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>SiwBook - Nuova Recensione</title>
    <link rel="stylesheet" href="/css/newReview.css" />
</head>
<body>
    <div class="register-container">
        <h2>Lascia una recensione per: <span th:text="${book.titolo}">[Titolo Libro]</span></h2>
        <form th:action="@{'/logged/formNewReview/' + ${book.id}}"
              th:object="${review}" method="post" enctype="multipart/form-data" class="register-card">

            <!-- CSRF token -->
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

            <div class="form-group">
                <input type="text"
                       id="titolo"
                       placeholder="Titolo recensione"
                       required
                       th:field="*{titolo}" />
                <span th:if="${#fields.hasErrors('titolo')}"
                      th:errors="*{titolo}"
                      th:style="'color:red'"></span>
            </div>

            <div class="form-group">
                <textarea id="testo"
                          placeholder="Scrivi qui la tua opinione…"
                          required
                          rows="6"
                          th:field="*{testo}"></textarea>
                <span th:if="${#fields.hasErrors('testo')}"
                      th:errors="*{testo}"
                      th:style="'color:red'"></span>
            </div>

            <div class="form-group">
                <input type="number"
                       id="voto"
                       placeholder="Voto (0–5)"
                       required
                       min="0" max="5" step="0.5"
                       th:field="*{voto}" />
                <span th:if="${#fields.hasErrors('voto')}"
                      th:errors="*{voto}"
                      th:style="'color:red'"></span>
            </div>

            <div class="form-group">
                <button type="submit">Invia recensione</button>
            </div>

            <div class="login-link">
                <p><a th:href="@{/books/{id}(id=${book.id})}">Torna al libro</a></p>
            </div>
        </form>
    </div>
</body>
</html>
